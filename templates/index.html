<!DOCTYPE html>
<html>
<head>
    <link rel="icon" type="image/png" href="/favicon/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/favicon/favicon.svg" />
    <link rel="shortcut icon" href="/favicon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png" />
    <link rel="manifest" href="/favicon/site.webmanifest"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
    <link rel="icon" type="image/png" href="/assets/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/assets/favicon.svg" />
    <link rel="shortcut icon" href="/assets/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-title" content="Monotonic" />
    <link rel="manifest" href="/assets/site.webmanifest" />

    <script src="https://kit.fontawesome.com/235894b977.js" crossorigin="anonymous"></script>    <title>Monotonic Radio</title>
</head> 

<body>
  <div id="content">

        <div id="header"><img id="logo" src="assets/mtr.jpg" height="45px" width="45px" style="margin-right:3px; margin-left: -5px;">Monotonic Radio &nbsp;<br id="line-break"><span id="live-status-offline">[<img src="assets/hourglass.png" class="live-icon"></img>OFFLINE ]</span><span id="live-status-online">[<img src="assets/play.png" class="live-icon"></img>ONLINE ]</span></div>

    <div id="play">
      <div class="colors" style="display: none;">
          <div class="a-color blue"></div>
          <div class="a-color red"></div>
          <div class="a-color blue"></div>
          <div class="a-color red"></div>
          <div class="a-color blue"></div>
          <div class="a-color red"></div>
          <div class="a-color blue"></div>
          <div class="a-color red"></div>
          <div class="a-color blue"></div>
          <div class="a-color red"></div>
          <div class="a-color blue"></div>
          <div class="a-color red"></div>
      </div>

      <svg id="play-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M24 22h-24l12-20z"/></svg>
      <svg id="pause-icon" xmlns="http://www.w3.org/2000/svg" version="1.0" width="1262.000000pt" height="1280.000000pt" viewBox="0 0 1262.000000 1280.000000" preserveAspectRatio="xMidYMid meet"><g transform="translate(0.000000,1280.000000) scale(0.100000,-0.100000)" fill="#FFFFFF" stroke="black"><path d="M669 12214 c-59 -18 -130 -81 -160 -141 l-24 -48 0 -5650 0 -5650 23 -47 c13 -26 43 -65 67 -87 83 -77 -104 -71 2295 -71 2400 0 2212 -6 2295 71 24 23 54 62 67 87 l23 47 0 5650 0 5650 -23 47 c-13 25 -43 64 -67 87 -83 77 105 71 -2299 70 -1824 0 -2158 -3 -2197 -15z"/><path d="M7542 12211 c-63 -22 -123 -76 -155 -141 l-22 -45 0 -5650 0 -5650 23 -47 c13 -25 43 -64 67 -87 83 -77 -105 -71 2295 -71 2399 0 2212 -6 2295 71 24 22 54 61 67 87 l23 47 0 5650 0 5650 -24 48 c-31 63 -101 123 -164 142 -44 13 -321 15 -2201 15 -2062 -1 -2153 -1 -2204 -19z"/></g></svg>
      <audio id="audio" src="https://monotonicradio.com/stream"></audio><p id="now-playing">{{ now_playing }}</p>
    </div>
    
    <div id="pemdas">
    <i></i>

    <div id="stream-and-chat">
      <div id="video">
        <img id="no-video" src="assets/novideo.png" style="display: none;" onclick="toggle()">
        <iframe id="stream" src="" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
      </div>
      <iframe id="chat" src="https://monotonicradio1.chatango.com/" class="scroll-transition-fade"></iframe>
    </div>

    <div id="circles">

    <div id="circle" >
        <svg class="thumbnail" height="650" width="650">
            <defs>
              <clipPath id="circle-clip">
                <path d="M50 325A275 275 0 1 1 600 325A275 275 0 1 1 50 325"/>
              </clipPath>
              
              <pattern id="noise-pattern" x="0" y="0" width="100" height="100" patternUnits="userSpaceOnUse">
                <image href="assets/noise.gif" x="0" y="0" width="100" height="100"/>
              </pattern>
            </defs>

            <image id="thumbnail" href="{{ thumbnail }}" x="50" y="50" width="550" height="550" clip-path="url(#circle-clip)" preserveAspectRatio="xMidYMid slice"/>
            <rect x="50" y="50" width="550" height="550" fill="url(#noise-pattern)" clip-path="url(#circle-clip)" style="pointer-events: none; opacity: .25;"/>
        </svg>
        <div class="circle-txt"><svg height="650" width="650">
            <path id="ellipse-id-r1" style="fill: none;" d="M25 325A300 300 0 1 1 625 325A300 300 0 1 1 25 325"></path>
            <text><textPath xlink:href="#ellipse-id-r1"><tspan id="show-text">&nbsp;&nbsp;While we're offline, please enjoy Monotonic's digital archive selection.&nbsp;While we're offline, please enjoy Monotonic's digital archive selection.&nbsp;While we're offline, please enjoy Monotonic's digital archive selection.&nbsp;While we're offline, please enjoy Monotonic's digital archive selection.&nbsp;While we're offline, please enjoy Monotonic's digital archive selection.</tspan></textPath></text>
        </svg></div>
        <div id="tune-in" style="display: none;">
            <svg id="play-icon-circle" xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><path fill="white" stroke="black" style="border:1px solid black" d="M50 3L3 97h94z"/></svg>
          <svg id="pause-icon-circle" xmlns="http://www.w3.org/2000/svg" version="1.0" width="100" height="100" viewBox="0 0 1262.000000 1280.000000" preserveAspectRatio="xMidYMid meet"><g transform="translate(0.000000,1280.000000) scale(0.100000,-0.100000)" fill="#FFFFFF" stroke="black" stroke-width="100"><path d="M669 12214 c-59 -18 -130 -81 -160 -141 l-24 -48 0 -5650 0 -5650 23 -47 c13 -26 43 -65 67 -87 83 -77 -104 -71 2295 -71 2400 0 2212 -6 2295 71 24 23 54 62 67 87 l23 47 0 5650 0 5650 -23 47 c-13 25 -43 64 -67 87 -83 77 105 71 -2299 70 -1824 0 -2158 -3 -2197 -15z"/><path d="M7542 12211 c-63 -22 -123 -76 -155 -141 l-22 -45 0 -5650 0 -5650 23 -47 c13 -25 43 -64 67 -87 83 -77 -105 -71 2295 -71 2399 0 2212 -6 2295 71 24 22 54 61 67 87 l23 47 0 5650 0 5650 -24 48 c-31 63 -101 123 -164 142 -44 13 -321 15 -2201 15 -2062 -1 -2153 -1 -2204 -19z"/></g></svg>
          </div>
    </div>

    <div id="circle-mobile">
        <svg class="thumbnail" height="325" width="325">
            <defs>
                <clipPath id="circle-clip-mobile">
                    <path d="M25 162.5A137.5 137.5 0 1 1 300 162.5A137.5 137.5 0 1 1 25 162.5"/>
                </clipPath>
                <pattern id="noise-pattern-mobile" x="0" y="0" width="100" height="100" patternUnits="userSpaceOnUse">
                  <image href="assets/noise.gif" x="0" y="0" width="100" height="100"/>
              </pattern>
            </defs>
            <image id="thumbnail-mobile" href="{{ thumbnail }}" x="25" y="25" width="275" height="275" clip-path="url(#circle-clip-mobile)" preserveAspectRatio="xMidYMid slice"/>
            <rect x="25" y="25" width="275" height="275" fill="url(#noise-pattern-mobile)" clip-path="url(#circle-clip-mobile)" style="pointer-events: none; opacity: .25;"/>
            <path id="blue-circle-mobile" style="fill: rgb(74, 128, 255); opacity: 0;" d="M25 162.5A137.5 137.5 0 1 1 300 162.5A137.5 137.5 0 1 1 25 162.5"></path>
        </svg>
        <div class="circle-txt">
            <svg height="325" width="325">
                <path id="ellipse-id-mobile" style="fill: none;" d="M12.5 162.5A150 150 0 1 1 312.5 162.5A150 150 0 1 1 12.5 162.5"></path>
                <text><textPath xlink:href="#ellipse-id-mobile"><tspan id="show-text-mobile">&nbsp;&nbsp;While we're offline, please enjoy Monotonic's digital archive selection  {{ now_playing }}</tspan></textPath></text>
            </svg>
        </div>
        <div id="tune-in" style="display: none;">
            <svg id="play-icon-circle-mobile" xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 100 100"><path fill="white" stroke="black" d="M50 3L3 97h94z"/></svg>
            <svg id="pause-icon-circle-mobile" xmlns="http://www.w3.org/2000/svg" version="1.0" width="50" height="50" viewBox="0 0 1262.000000 1280.000000" preserveAspectRatio="xMidYMid meet"><g transform="translate(0.000000,1280.000000) scale(0.100000,-0.100000)" fill="#FFFFFF" stroke="black"  stroke-width="100"><path d="M669 12214 c-59 -18 -130 -81 -160 -141 l-24 -48 0 -5650 0 -5650 23 -47 c13 -26 43 -65 67 -87 83 -77 -104 -71 2295 -71 2400 0 2212 -6 2295 71 24 23 54 62 67 87 l23 47 0 5650 0 5650 -23 47 c-13 25 -43 64 -67 87 -83 77 105 71 -2299 70 -1824 0 -2158 -3 -2197 -15z"/><path d="M7542 12211 c-63 -22 -123 -76 -155 -141 l-22 -45 0 -5650 0 -5650 23 -47 c13 -25 43 -64 67 -87 83 -77 -105 -71 2295 -71 2399 0 2212 -6 2295 71 24 22 54 61 67 87 l23 47 0 5650 0 5650 -24 48 c-31 63 -101 123 -164 142 -44 13 -321 15 -2201 15 -2062 -1 -2153 -1 -2204 -19z"/></g></svg>
        </div>
      
    </div>

      <div id="info-div" >
        <div id="info-table">
          <div id="title-info" class="blue">
              {{ now_playing }}
          </div>
          <div id="genre-info">
          Genres: <span id="genres">{{ genres }}</span>
          </div>
          <div id="description-info">
          Tracklist:<br>
            {{ description }}
          </div>
        </div>
    </div>
    
  </div>

  </div>

  <div id="info-div-mobile" >
        <div id="info-table">
          <div id="title-info" class="blue">
              {{ now_playing }}
          </div>
          <div id="genre-info">
          Genres: <span id="genres">{{ genres }}</span>
          </div>
          <div id="description-info">
          Tracklist:<br>
            {{ description }}
          </div>
        </div>
    </div>

  <div class="footer">
    <div id="link-grid">
        <a class="icon-link" href="https://www.youtube.com/@MonotonicRadio" target="_blank"><img class="icon" src="assets/yt.png"></img></a>
        <a class="icon-link" href="https://soundcloud.com/monotonicradio" target="_blank"><img class="icon" style="height:90%; margin-top:-6px" src="assets/sc.png"></img></a>
        <a class="icon-link" href="https://www.instagram.com/monotonicradio/" target="_blank" ><img class="icon" src="assets/ig.png"></img></a>
    </div>
  </div>

</body>

<style>

  #genres {
    background-color: rgba(240, 91, 24);
  }
  #genre-info {
    text-align: left;
    padding: 10px;
    border-bottom: 1px solid black;
  }
  #description-info {
    padding: 10px;
    border-top: none;
    text-align: left;
  }
  #info-table {
    width: 90%;
    margin-bottom: 150px;
    border: 1px solid black;

  }
  #title-info {
    text-align: left;
    font-family: 'Archivo Semibold';
    font-size:18pt;
    height: 30px;
    justify-content: left;
    align-items: center;
    display: flex;
    padding: 10px;
    border-bottom: 1px solid black
  }

  #info-div-mobile {
    display: flex;
  }

  #info-div {
    display: none;
    margin-top: 30px;
    justify-content: center;
    display: flex;
    width: fit-content;
    height: fit-content;
  }
  html {
    max-width: 100%;
    overflow-x: hidden;
}

  .colors {
    overflow: hidden;
    position: absolute;
    z-index: -10;
    left: -20px;
    display: flex;
    will-change: transform;
    backface-visibility: hidden;
  }

  .a-color {
    width: 100px;
    height: 70px;
    transform: none !important;
    animation: none !important;
    will-change: transform;
    backface-visibility: hidden;
  }

  .black {
    background-color: black;
  }

  .red {
    background-color: rgba(240, 91, 24);
  }

  .blue {
    background-color: rgb(74, 128, 255);
  }

.thumbnail {
  animation: spin-reverse 120s linear infinite;
}

#circle {
  border: none;
  outline: none;
  display: none;
  cursor: pointer;
  position: relative;
  width: 650px;
  height: 650px;
}

#circle-mobile {
  cursor: pointer;
  top: 59%;
  left: 50%;
  position: relative;
  transform: translate(-50%,0);
  width: 325px;
  height: 325px;
}

#circle > svg, #circle > .circle-txt {
  position: absolute;
  top: 0;
  left: 0;
  width: 650px;
  height: 650px;
}

#circle-mobile > svg, #circle-mobile > .circle-txt {
  position: absolute;
  top: 0;
  left: 0;
  width: 325px;
  height: 325px;
}

#tune-in {
  position: absolute;
  top: 49%;
  left: 53%;
  transform: translate(-50%, -50%);
}

.circle-txt {
  animation: spin 120s linear infinite;
}

@keyframes spin {
    to {
        transform:rotate(1turn)
    }
}

@keyframes spin-reverse {
    to {
        transform:rotate(-360deg)
    }
}

.footer{
    bottom: 0px;
    text-align: center ;
    align-items: center;
    font-size: 16px ;
    font-family: verdana ;
    width: 100% ;
    height: 70px ;
    margin-top: 30px;
    background-color:rgb(255, 255, 255);
    display: flex;
    border-top: 1px solid black;
    border-bottom: 1px solid black;
}

  #link-grid {
    width: 100%;
    margin-top: 20px;
    height: 65px;
    display: flex;
    align-items: center;
  }

  body {
    letter-spacing: -0.06em;
    font-family: 'Archivo Regular';
  }

  #pemdas {
    padding-right: 40px;
    padding-left: 40px;
    display: block;
    margin-top: 160px;
    line-height: 1.35em;
  }

  #live-status-online {
    display: none;
  }

  #live-status-offline {
    display: none;
  }

  #play-icon {
    transform: rotate(90deg);
    margin-right: 15px;
  }

  #play-icon-circle {
    transform: rotate(90deg);
    margin-right: 15px;
  }


  #pause-icon-circle {
    display: none;
    margin-right: 30px;
  }

    #play-icon-circle-mobile {
    transform: rotate(90deg);
    margin-right: 15px;
  }


  #pause-icon-circle-mobile {
    display: none;
    margin-right: 30px;
  }

  #pause-icon {
    height: 25px;
    width: 24px;
    margin-right: 15px;
    display: none;
  }

  #play {
    z-index: 11;
    position: fixed;
    top: 70px;
    overflow: hidden !important;
    /*background-color: rgba(74, 128, 255,1);*/
    background-color: white;
    transition: background-color 0.1s ease-in-out;
    cursor: pointer;
    padding-left: 20px;
    margin: auto;
    height: 65px;
    border-top: black 1px solid;
    border-bottom: black 1px solid;
    align-items: center;
    display: flex;
    width: 99%;

  }
  #chat {
    border: none; 
    width: 90%; 
    height: 300px; 
    transition-duration: initial;
    margin-bottom: 120px;
  }

  #line-break { 
    display: block;
  }

  #video {
    display: flex;
    justify-content: center;
  position: relative;
  }

  body {
    padding: 0;
    margin: 0;
    width: 100%;
    height: 100%;
  }

  #now-playing {
    font-family: 'Archivo SemiBold';
    text-align: left;
  }

  #video iframe {
    background-color: white;
    border: none;
    top: 0;
    left: 0;
    width: 90%;
    aspect-ratio: 16 / 9
  }

  #no-video {
    cursor: pointer;
      background-color: white;
      border: none;
      top: 0;
      left: 0;
      width: 90%;
      aspect-ratio: 16 / 9
  }

  .live-icon {
    position: relative;
    top: 8px;
    height: 35px;
    margin-left: 5px;
    margin-right: 5px;
  }

  #live-status {
    display: none;
    font-family: 'Archivo Regular';
  }
  .message {
    font-family: 'Archivo Regular';
  }
  #stream-and-chat {
    justify-content: center;
    display: block;
  }

  #stream {
    height: 94.5%;
  }

  .icon {
    height:  70%;
  }

  .icon-link {
    display: flex;
    justify-content: center;
    height: 100%;
    margin:auto;
    width: 33.33%;  
}
  #content { 
    justify-content: center;
    align-items: center;
    text-align: center;
  }
  #header {
    width:100%;
    top: 0px;
    z-index: 10;
    background-color: white;
    position: fixed;
    align-items: center;
    display: flex;
    text-align: left;
    padding: 10px 18px 10px;
    border-bottom-width: 0px;
    border-bottom-style: solid;
    border-bottom-color: black;
    font-family: "Archivo Semibold";
    font-size: 24pt;
    line-height: 0.5em;
  }
  @font-face {
      font-family: "Archivo SemiBold";
      src: url("assets/Archivo-SemiBold.ttf") format("truetype");
  }
  @font-face {
      font-family: "Archivo Regular";
      src: url("assets/Archivo-Regular.ttf") format("truetype");
  }
     @media (orientation: landscape)  {
        #pemdas {
          display: flex;
        }

      #logo {
        height: 65px !important;
        width: 65px !important;
      }

        #header {
          padding: 5px 18px 5px;
        }



       #video iframe {
          width: 100%;
       }

       #no-video {
          width: 100% !important;
       }

       #stream-and-chat {
        margin-top: 25px;
       }

       #video {
        width: 60%;
       }
      #info-table {
        width:600px;
      }

      #info-div {
        display: flex;
        position: relative;
        left: 120px;
        margin-top: 30px;
      }

      #info-div-mobile {
        display: none;
      }

      #circle-mobile {
        display: none;
      }

      #circle {
        display:block;
      }

      #line-break {
        display: none;
      }
      #stream-and-chat {
        display: flex;
      }
      #chat {
        width: 300px;
        height: 540px; 
      }
      #header {
        font-size: 28pt;
      }
      .live-icon {
        top: 10px;
        height: 50px;
        margin-left: 10px;
        margin-right: 10px;
      }
      .icon {
        height: 70%;
      }
    }
</style>

<script>

const play = document.getElementById('play');
const circle = document.getElementById('circle');
const chat = document.getElementById('chat');
const noVideo = document.getElementById('no-video');
const circles = document.getElementById('circles');
const circleMobile = document.getElementById('circle-mobile');
const infoDiv = document.getElementById('info-div');
const audio = document.getElementById('audio');
const pauseIcon = document.getElementById('pause-icon');
const playIcon = document.getElementById('play-icon');
const genres = document.getElementById('genres');
const pauseIconCircle = document.getElementById('pause-icon-circle');
const playIconCircle = document.getElementById('play-icon-circle');
const pauseIconCircleMobile = document.getElementById('pause-icon-circle-mobile');
const playIconCircleMobile = document.getElementById('play-icon-circle-mobile');
const blueCircle = document.getElementById('blue-circle');
const blueCircleMobile = document.getElementById('blue-circle-mobile');
const streamEmbed = document.getElementById('stream');
const orgs = document.querySelector('.colors');

function toggle() {
  if (!audio.paused) {
    audio.pause();
    playIcon.style.display = 'block';
    pauseIcon.style.display = 'none';
    playIconCircle.style.display = 'block';
    pauseIconCircle.style.display = 'none';
    playIconCircleMobile.style.display = 'block';
    pauseIconCircleMobile.style.display = 'none';
    play.style.background = 'rgb(255, 255, 255)';
    play.style.color = 'black';
    orgs.style.display = 'none';
    //if (blueCircle) blueCircle.style.opacity = 0.8;
    //if (blueCircleMobile) blueCircleMobile.style.opacity = 0.8;
  }
  else {
    orgs.style.display = 'flex';
    audio.play();
    setupMarquee('play');
    playIcon.style.display = 'none';
    pauseIcon.style.display = 'block';
    playIconCircle.style.display = 'none';
    pauseIconCircle.style.display = 'block';    
    playIconCircleMobile.style.display = 'none';
    pauseIconCircleMobile.style.display = 'block';
    play.style.background = 'rgba(0,0,0,0) !important';
    play.style.color = 'white';
    //if (blueCircle) blueCircle.style.opacity = 0;
    //if (blueCircleMobile) blueCircleMobile.style.opacity = 0;
  }
}

play.addEventListener('click', toggle);
if (circle) circle.addEventListener('click', toggle);
if (circleMobile) circleMobile.addEventListener('click', toggle);

const online = document.getElementById('live-status-online');
const offline = document.getElementById('live-status-offline');
const stream = document.getElementById('stream');
const video = document.getElementById('stream-and-chat');

function updateMediaSession(title, artist, artwork) {
  if ('mediaSession' in navigator) {
    navigator.mediaSession.metadata = new MediaMetadata({
      title: title,
      artist: artist,
      album: 'Monotonic Radio',
      artwork: [
        { src: artwork, sizes: '96x96',   type: 'image/png' },
        { src: artwork, sizes: '128x128', type: 'image/png' },
        { src: artwork, sizes: '256x256', type: 'image/png' },
        { src: artwork, sizes: '512x512', type: 'image/png' }
      ]
    });

    navigator.mediaSession.setActionHandler('play', () => {
      audio.play();
    });
    
    navigator.mediaSession.setActionHandler('pause', () => {
      audio.pause();
    });
  }
}

const nowPlaying = document.getElementById('now-playing');
const showText = document.getElementById('show-text');
const showTextMobile = document.getElementById('show-text-mobile');
console.log(showText ? showText.textContent : 'showText not found');

const titleInfo = document.getElementById('title-info');
const descriptionInfo = document.getElementById('description-info');

const thumbnail = document.getElementById('thumbnail');
const thumbnailMobile = document.getElementById('thumbnail-mobile');

const firstLoad = true;
function getUpdatedInfo() {
      fetch('https://monotonicradio.com/info', {
          method: 'GET'
      })
      .then(function(response) { return response.json(); })
      .then(function(json) {
          if (json['source']=='live') {
              if (window.innerWidth < window.innerHeight) {
                  video.style.display = 'block';
              }
              else {
                  video.style.display = 'flex';
              }

              let url = String(json['youtube_link']);
              if (url.includes('youtube') | url.includes('meshcast')) {
                if (streamEmbed.src != url) {
                  streamEmbed.style.display = 'block';
                  streamEmbed.src = url;
                  audio.src = audio.src;
                  chat.src = "https://monotonicradio1.chatango.com/";
                }
              }
              else {
                //noVideo.style.display = 'block';
                video.style.display = 'none';
                streamEmbed.style.display = 'none';
              }
              //online.style.display = 'contents';
              //offline.style.display = 'none';

              nowPlaying.innerHTML = json['now_playing'] + '<span style="font-family:Archivo Regular;"> - (LIVE)</span>';
              
              circles.style.display = 'none';
              infoDiv.style.display = 'none';
          }
          else {
            //offline.style.display = 'contents';
            //online.style.display = 'none';
            video.style.display = 'none';
            play.style.display = 'flex';
            infoDiv.style.display = 'flex';

            circles.style.display = 'flex';

            if (json['thumbnail'] != thumbnail.getAttribute('href')) {
                console.log(thumbnail.getAttribute('href'));
                thumbnail.setAttribute('href', json['thumbnail']);
                thumbnailMobile.setAttribute('href', json['thumbnail']);
            }
            const remainingTime = Number(json['duration']) - Number(json['elapsed']);
            const endTime = new Date();
            endTime.setSeconds(endTime.getSeconds() + remainingTime);
            nowPlaying.innerHTML = json['now_playing'] + '<span style="font-family:Archivo Regular;"> - (Re-Run) - Until ' +  endTime.toLocaleString('en-US', { hour: 'numeric', minute: 'numeric', hour12: true }) + '</span>';
            
            const archiveText = "&nbsp;&nbsp;While we're offline, please enjoy Monotonic's digital archive selection.".repeat(10)
            if (showText) showText.innerHTML = archiveText;
            if (showTextMobile) showTextMobile.innerHTML = archiveText;

          }

          titleInfo.innerHTML = json['now_playing'];
          descriptionInfo.innerHTML = json['video_description'].replace(/\n/g, '<br>');
          genres.textContent = json['genres'].join(', ');
          updateMediaSession(json['now_playing'], 'Monotonic Radio', 'assets/mtr.jpg');
      });
}

getUpdatedInfo();
setInterval(getUpdatedInfo, 3000);


function setupMarquee(wrapperId, direction = 'left') {
  const wrapper = document.getElementById(wrapperId);
  if (!wrapper) return;

  const originalItems = [...orgs.children];
  
  const clones = originalItems.map(item => item.cloneNode(true));
  
  if (direction === 'left') {
    clones.forEach(clone => orgs.appendChild(clone));
  } else {
    clones.reverse().forEach(clone => orgs.insertBefore(clone, orgs.firstChild));
  }

  orgs.offsetHeight;
  
  const totalWidth = originalItems.reduce((sum, el) => {
    const style = window.getComputedStyle(el);
    const marginRight = parseFloat(style.marginRight) || 0;
    return sum + el.offsetWidth + marginRight;
  }, 0);
  
  const duration = totalWidth / 50; // 75px/sec
  
  const uid = Math.random().toString(36).substr(2, 5);
  const animName = `scroll-${direction}-${uid}`;
  
  if (direction === 'left') {
    orgs.style.transform = 'translateX(0)';
  } else {
    orgs.style.transform = 'translateX(-50%)';
  }
  
  const style = document.createElement('style');
  if (direction === 'left') {
    style.textContent = `
      @keyframes ${animName} {
        0% { transform: translateX(0); }
        100% { transform: translateX(-50%); }
      }
    `;
  } else {
    style.textContent = `
      @keyframes ${animName} {
        0% { transform: translateX(-50%); }
        100% { transform: translateX(0); }
      }
    `;
  }
  document.head.appendChild(style);
  
  orgs.style.cssText += `
    animation-name: ${animName};
    animation-duration: ${duration}s;
    animation-timing-function: linear;
    animation-iteration-count: infinite;
    animation-fill-mode: forwards;
  `;
}

</script>