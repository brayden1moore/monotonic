<!DOCTYPE html>
<html>
<head>
    <link rel="icon" type="image/png" href="/favicon/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/favicon/favicon.svg" />
    <link rel="shortcut icon" href="/favicon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png" />
    <link rel="manifest" href="/favicon/site.webmanifest"/>
    <meta name="viewport" content="width=device-width, initial-scale=0.85">
    <meta charset="UTF-8">
    <link rel="icon" type="image/png" href="/assets/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/assets/favicon.svg" />
    <link rel="shortcut icon" href="/assets/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-title" content="Monotonic Admin" />
    <link rel="manifest" href="/assets/site.webmanifest" />

    <script src="https://kit.fontawesome.com/235894b977.js" crossorigin="anonymous"></script>    <title>Upload - Monotonic Radio</title>
</head> 

<body>
    <div id="content">
        <div id="header" onclick="location.href = '/upload'">
            <img id="logo" src="assets/mtr.jpg" height="50px" width="50px" style="margin-right:3px; margin-left: -5px;">
            Monotonic Archive
        </div>
        
        <form id="upload-form" method="POST" enctype="multipart/form-data">
            Show<br>
            <select id="show-select" name="show" required>
                {% if 'a' in shows %}
                <option {% if editing and editing.show == 'a' %}selected{% endif %} value="a">Afternoon Breakfast</option>
                {% endif %}
                {% if 'c' in shows %}
                <option {% if editing and editing.show == 'c' %}selected{% endif %} value="c">Cuts In The Fog</option>
                {% endif %}
                {% if 'r' in shows %}
                <option {% if editing and editing.show == 'r' %}selected{% endif %} value="r">Reading For Now</option>
                {% endif %}
            </select><br>

            Date<br>
            <input type="date" name="date" value="{% if editing %}{{ editing.date }}{% endif %}" required>
            
            Title<br>
            <input id="title-input" name="title" value="{% if editing %}{{ editing.title }}{% endif %}" required><br>
            
            Tracklist / Description<br>
            <textarea id="tracklist-input" name="tracklist" placeholder="" required>{% if editing %}{{ editing.description }}{% endif %}</textarea><br>
            
            Genres (comma-separated)<br>
            <input id="genres-input" name="genres" value="{% if editing %}{{ editing.genre_string }}{% endif %}" placeholder="" required><br>
            
            MP3{% if editing %} <a target="_blank" href="https://scudbucket.sfo3.cdn.digitaloceanspaces.com/monotonic-radio/{{ editing.filename }}">[{{ editing.filename }}]</a>{% endif %}<br>
            <input class="file-upload" type="file" name="mp3" accept=".mp3" {% if not editing %}required{% endif %}><br>
            
            Thumbnail{% if editing %} <a target="_blank" href="{{ editing.thumbnail }}">[{{ editing.thumbnail }}]</a>{% endif %}<br>
            <input class="file-upload" name="thumbnail" type="file" accept="image/*" {% if not editing %}required{% endif %}><br>
            
            <input class="id" name="id" value="{% if editing %}{{ editing.id }}{% endif %}">
            <button type="submit">{% if editing %}Update (you sure?){% else %}Upload{% endif %}</button>
        </form>
        
        <p class="message" id="success">{{ success }}</p>
        <p class="message" id="error">{{ error }}</p>

        Episodes
        <div id="episodes">
            {% for episode in episodes %}
            <div class="episode">
                <div class="episode-thumbnail-container">
                    <img class="episode-thumbnail" src="{{ episode.thumbnail }}" onerror="this.onerror=null; this.src='assets/mtr.jpg';">
                </div>
                <div class="episode-info">
                    <a class="episode-link" href="upload?episode={{ episode.id }}">{{ episode.title }}</a>
                    <br>{{ episode.genre_string }}
                </div>
        
            </div> 
            {% endfor %} 
        </div>

    </div>
</body>

<style>
    .id {
        display: none;
    }
    .episode-info {
        display: block;
    }
    .episode-thumbnail-container {
        height: 90px;
        width: 90px;
        margin-right: 10px;
        border: 1px solid black;
    }
    .episode-thumbnail {
        object-fit: cover;
        height: 100%;
        width: 100%;
    }
    #success {
        color: green;
    }
    #error {
        color: red;
    }
    .message {
        height: fit-content;
    }

    #show-select {
        margin-bottom: 20px;
    }
    #header {
        cursor: pointer;
        display: flex;
        align-items: center;
        margin-bottom: 20px;
        font-size: 40px;
        letter-spacing: -0.06em;
        font-family: 'Archivo SemiBold';
        border-bottom: 1px solid black;
        padding-bottom: 15px;
    }
    textarea {
        resize:vertical;
        width: 100%;
        height: 100px;
        margin-bottom: 20px;
    }
    input[type="file"] {
        align-items: baseline;
        color: inherit;
        text-align: start;
        cursor: pointer;
    }
    a {
        color: rgb(74, 128, 255);
    }
    button {
        border: 1px solid black;
        outline: none;
        background-color: rgb(74, 128, 255);
        cursor: pointer;
        color: white;
        font-family: 'Archivo Regular';
        width: auto;
        height: 30px;
        border-radius: 8px;
    }
    button:hover{
        background-color: white;
        color: black;
    }
    input {
        margin-bottom: 20px;
        width: 100%;
    }

    body {
        padding-top: 20px;
        letter-spacing: -0.06em;
        font-family: 'Archivo Regular';
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 90vh;
    }
    #content {
        height: auto;
        width: 50%;
    }
    #upload-form {
        margin-top: 35px;
        align-items: center;
        height: auto;
        display: block;
    }

    #episodes {
        padding-top: 0px;
        border-top: 1px solid black;
        width: 100%;
        height: fit-content;
        /*max-height: 250px;*/
        overflow-y: scroll;
        display: grid;
        grid-template-columns: 1fr 1fr;
    }

    .episode {
        display: flex;
        align-items: center;
        padding: 10px;
        padding-left: 0px;
        margin-bottom: 0px;
        border-bottom: 1px solid lightgray;
    }

    .episode-link {
        color: rgb(74, 128, 255);
    }

    .file-link {
        color: black;
    }

    @font-face {
      font-family: "Archivo SemiBold";
      src: url("assets/Archivo-SemiBold.ttf") format("truetype");
    }
    @font-face {
        font-family: "Archivo Regular";
        src: url("assets/Archivo-Regular.ttf") format("truetype");
    }

    @media (orientation: portrait)  {
        #content {
            width: 90%;
        }
        #header {
            font-size: 38px;
        }
    }
</style>

<script>

</script>